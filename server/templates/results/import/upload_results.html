{% extends "base.html" %}

{% block title %}Upload Results CSV - Result Portal{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 40px auto; padding: 20px;">
  <h1>Upload Results CSV</h1>
  <p>Upload a CSV file containing result data for import. The file will be validated before import.</p>

  <form method="post" enctype="multipart/form-data" style="margin-top: 30px;">
    {% csrf_token %}
    
    <div style="margin-bottom: 20px;">
      <label for="{{ form.exam.id_for_label }}" style="display: block; margin-bottom: 5px; font-weight: 500;">
        {{ form.exam.label }}
      </label>
      {{ form.exam }}
      {% if form.exam.help_text %}
        <small style="display: block; margin-top: 5px; color: #666;">{{ form.exam.help_text }}</small>
      {% endif %}
      {% if form.exam.errors %}
        <div style="color: red; margin-top: 5px;">{{ form.exam.errors }}</div>
      {% endif %}
    </div>

    <div style="margin-bottom: 20px;">
      <label for="{{ form.csv_file.id_for_label }}" style="display: block; margin-bottom: 5px; font-weight: 500;">
        {{ form.csv_file.label }}
      </label>
      {{ form.csv_file }}
      {% if form.csv_file.help_text %}
        <small style="display: block; margin-top: 5px; color: #666;">{{ form.csv_file.help_text }}</small>
      {% endif %}
      {% if form.csv_file.errors %}
        <div style="color: red; margin-top: 5px;">{{ form.csv_file.errors }}</div>
      {% endif %}
    </div>

    <div style="margin-top: 30px;">
      <button type="submit" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
        Preview Import
      </button>
      <a href="/admin/" style="margin-left: 10px; padding: 10px 20px; background: #6c757d; color: white; text-decoration: none; border-radius: 4px; display: inline-block;">
        Cancel
      </a>
    </div>
  </form>

  <div style="margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 4px;">
    <h3>Required CSV Columns:</h3>
    <ul>
      <li>roll_no</li>
      <li>name</li>
      <li>block</li>
      <li>year</li>
      <li>subject</li>
      <li>written_marks</li>
      <li>viva_marks</li>
      <li>total_marks</li>
      <li>grade</li>
      <li>exam_date</li>
    </ul>
    <p style="margin-top: 15px;"><strong>Optional columns:</strong> respondent_id</p>
  </div>
</div>
{% endblock %}
